cd "$HOME/Desktop/tau_crystal/tau_crystal" || exit 1
set -euo pipefail; set +H; umask 022; export LC_ALL=C LANG=C
ts="$(date -u +%FT%TZ)"
rep=".tau_ledger/manifest_checks/${ts//:/-}_check.json"; mkdir -p "$(dirname "$rep")"; : > "$rep"
need1=".tau_ledger/reflection/report.json"
need2=".tau_ledger/cohomology/h1_obstruction.json"
need3=".tau_ledger/lean_module_capsules/capsule_set.seal.json"
missing=0; for f in "$need1" "$need2" "$need3"; do [ -s "$f" ] || { echo "[warn] missing $f"; missing=1; }; done
count_json=0; total_bytes=0
list_file=".tmp.manifest_census.$$"; : > "$list_file"
while IFS= read -r j; do [ -n "$j" ] || continue; [ -f "$j" ] || continue; count_json=$((count_json+1)); sz=$(wc -c <"$j" | tr -d "[:space:]"); total_bytes=$((total_bytes+sz)); h=$(openssl dgst -sha256 "$j" | awk "{print \$2}"); printf "%s\n" "$(printf "%s" "$j" | sed "s/\"/\047/g"),$sz,$h" >> "$list_file"; done <<EOF_FIND_LIST
.tau_ledger/automorphic/critical_zeros.json
.tau_ledger/automorphic/hecke_1757927249.json
.tau_ledger/automorphic/new_zeros.json
.tau_ledger/capsules/lost_artifacts_freeze_001.receipt.json
.tau_ledger/capsules/lost_av_capsule_chain_20250927T202321Z.receipt.json
.tau_ledger/capsules/lost_discovery_radar_20250927T202321Z.receipt.json
.tau_ledger/capsules/lost_fft_mu_suite_20250927T202320Z.receipt.json
.tau_ledger/capsules/lost_holography_tensor_lifts_20250927T202316Z.receipt.json
.tau_ledger/capsules/lost_interference_map_20250927T202317Z.receipt.json
.tau_ledger/capsules/lost_langlands_cft_20250927T202318Z.receipt.json
.tau_ledger/capsules/lost_oci_docker_proof_20250927T202319Z.receipt.json
.tau_ledger/capsules/lost_signed_runner_20250927T202320Z.receipt.json
.tau_ledger/capsules/lost_sym2_double_zero_20250927T202319Z.receipt.json
.tau_ledger/capsules/lost_tau_entropy_witness_20250927T202317Z.receipt.json
.tau_ledger/capsules/lost_tau_reflection_20250927T202315Z.receipt.json
.tau_ledger/capsules/lost_timefold_receipts_20250927T202316Z.receipt.json
.tau_ledger/ci/signed_runner/2025-09-29T07-39-33Z_sig.json
.tau_ledger/ci/signed_runner/2025-09-29T07-40-39Z_sig.json
.tau_ledger/cohomology/coboundary_delta_tau.json
.tau_ledger/cohomology/cocycle_tau.json
.tau_ledger/cohomology/h1_obstruction.json
.tau_ledger/coho_frobenius_tag.json
.tau_ledger/coho_obstructions.json
.tau_ledger/coho_obstruction_v2.json
.tau_ledger/corridor/corridor_20250929T033832Z_3fe96cbe26f8.json
.tau_ledger/corridor/corridor_20250929T034134Z_3fe96cbe26f8.json
.tau_ledger/dashboard/dashboard_2025-09-18T02-22-42Z.json
.tau_ledger/dashboard/dashboard_2025-09-18T02-24-59Z.json
.tau_ledger/demo/run1.json
.tau_ledger/discovery/confirm_double_zero.json
.tau_ledger/discovery/confirm_double_zero_stable.json
.tau_ledger/discovery/double_zero.json
.tau_ledger/discovery/modcurves/Alice_X.json
.tau_ledger/discovery/modcurves/Cody_A.json
.tau_ledger/discovery/modcurves/Mother_A.json
.tau_ledger/discovery/morpho_receipt_hashes.json
.tau_ledger/discovery/morpho_receipt_manifest.json
.tau_ledger/discovery/morpho_signature_pair.json
.tau_ledger/discovery/morpho_signature_pair_hashes.json
.tau_ledger/entropy/entropy_compare_20250929T043259Z_d9ff391ddfa6.json
.tau_ledger/entropy/entropy_compare_20250929T043342Z_503bc58d5fd0.json
.tau_ledger/entropy/entropy_compare_20250929T043517Z_ea2f91c713dd.json
.tau_ledger/entropy/entropy_compare_20250929T045931Z_aceb3204a509.json
.tau_ledger/entropy/entropy_compare_20250929T050125Z_c841406f78f4.json
.tau_ledger/entropy/entropy_compare_20250929T050131Z_d56e9ce8a719.json
.tau_ledger/entropy/entv1-20250914T023136Z.json
.tau_ledger/entropy/witness_20250929T042055Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T042100Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T043338Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T043341Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T043512Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T043515Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T045925Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T063115Z_74353175e75a.json
.tau_ledger/entropy/witness_20250929T063118Z_74353175e75a.json
.tau_ledger/evolver/evolver-20250914T151253Z.json
.tau_ledger/evolver/evolver-20250914T162239Z.json
.tau_ledger/evolver/evolver-20250914T162501Z.json
.tau_ledger/evolver/evolver-20250914T162526Z.json
.tau_ledger/evolver/evolver-20250914T164603Z.json
.tau_ledger/evolver/evolver-20250914T175521Z.json
.tau_ledger/experimental/bootstrap_mu.json
.tau_ledger/experimental/bsd_rank1.json
.tau_ledger/experimental/fft_bsd.json
.tau_ledger/experimental/symsquare_zeros.json
.tau_ledger/exports/export_repo_261da4bb9294.json
.tau_ledger/galois/rho_1757927249.json
.tau_ledger/geom/anchor_20250919172810_73c9c826c7c7ca46239ca835d6a7c7aa65b4ee3ad11df0536853f36ca1fb45dd.json
.tau_ledger/geom/anchor_20250919202754_d082d40c298d662a4da7619f5808454876f9e16db5fdd2c3d4bd70ffcec65eac.json
.tau_ledger/geom/similar_20250919172808_bb63f3cc067c4ac221b246619d30ef9500e573f051334a1495de0767b1717e50.json
.tau_ledger/geom/similar_20250919202754_9e3ef5541935ade74904d49132ce684ee2861b18e52afdc2075c5921fad2b440.json
.tau_ledger/geom/stability_20250919172807_ac72c0ca1d5307438a8cf39ff24fd56090e2d54fa4718815fbc25010c59ee4f7.json
.tau_ledger/geom/stability_20250919202753_4d0ae2819832c845fc475ba8b490a65fca9e051695c85ccd90c0b2c667f9e05e.json
.tau_ledger/geom/symmetry_20250919172806_04a6797fbd465b29c6870d90860f162babb45e31da244c4880fc2c79e4295306.json
.tau_ledger/geom/symmetry_20250919202752_bcaf00884275f16c84baae40c8f51e2f16d7292b735b205430341900a7c0d779.json
.tau_ledger/geom/verify_20250919172811_eb8e554134967468781cdceb80b1f0672cea26aa851a4429072b05147d13387a.json
.tau_ledger/geom/verify_20250919202755_8a4171ece9891b25901d293d902994676ab4e773d4ca7b529c64205e5286738c.json
.tau_ledger/geom/_archive/anchor_20250919170524_3df490a1c12368fb2702561fb2212427cb682a5a45949310653692ad422c2c82.json
.tau_ledger/geom/_archive/anchor_20250919170730_3697a98ffc46ea262a3f7c31a03c2e30e45a906f41d2a40064d569f9747193bd.json
.tau_ledger/geom/_archive/anchor_20250919171922_453ff991567aaec3fc01de8c073c2a150379100fd9af71a86829e29e307fddda.json
.tau_ledger/geom/_archive/anchor_20250919172409_6666c827a7993b639254bc8db937a8965f9489b6b19515ace600b38c104f6f0d.json
.tau_ledger/geom/_archive/anchor_20250919172810_73c9c826c7c7ca46239ca835d6a7c7aa65b4ee3ad11df0536853f36ca1fb45dd.json
.tau_ledger/geom/_archive/anchor_20250919201746_e3ef17536a6bd37f08bae99d4fcfc2daf75911e8ce72cd3d3b30bb3b3f8c147e.json
.tau_ledger/geom/_archive/similar_20250919170525_638dee6e2ce74aeec0ef237c614d2f8fa29b3ec3ba07f88248a7e4cc9fda836e.json
.tau_ledger/geom/_archive/similar_20250919170730_7c48e6723065e0b43d2740ed26aaa6bfd6a45c5188c07ad7a9f247206fc0c461.json
.tau_ledger/geom/_archive/similar_20250919171922_62d6ef8f39f6040d55dee58410e3cddd05e75bdf5e6bac92bb0b99a9429b4014.json
.tau_ledger/geom/_archive/similar_20250919172410_d37e551def4e51e71b83ff65c09dfcf2f409bd63b31fb6eec183b579b9b58819.json
.tau_ledger/geom/_archive/similar_20250919172636_dc5d626696fd851020ff2e49a66197bcb93f810db30a519482397a62d06b5bac.json
.tau_ledger/geom/_archive/similar_20250919172808_bb63f3cc067c4ac221b246619d30ef9500e573f051334a1495de0767b1717e50.json
.tau_ledger/geom/_archive/similar_20250919201746_ddce6c60dcee0923aef5d5c6f11871754aed7044767c93192e8ca868bb564cc1.json
.tau_ledger/geom/_archive/stability_20250919170524_6ef5ccdb0e5ecfb131138724edf54239a797a7ff62de001a4d4b052b8cced5d1.json
.tau_ledger/geom/_archive/stability_20250919170729_b967359202757bf6c581b70d939ea09fcb9e44504b18e3d0e5a56916c8bbaee5.json
.tau_ledger/geom/_archive/stability_20250919171921_bc78bac3b8fee27d3f089241f647b8c327e0aba3a8fa8bf333b1fa51572c355f.json
.tau_ledger/geom/_archive/stability_20250919172409_d973472595b5fae375335cd246bf743812322ff7b1f3327d8b7fa0ff6ab62a4b.json
.tau_ledger/geom/_archive/stability_20250919172635_bfc6bf9d61c9b7c0a971777b284db067b5ca1cd742e85427453988a5f15077d9.json
.tau_ledger/geom/_archive/stability_20250919172807_ac72c0ca1d5307438a8cf39ff24fd56090e2d54fa4718815fbc25010c59ee4f7.json
.tau_ledger/geom/_archive/stability_20250919201745_e7a2209a6c9581104b3ca982e4ed7b59d323fec9ef1cd3d6c49de0ff7459d34a.json
.tau_ledger/geom/_archive/symmetry_20250919170523_dfb634070b2fde1480d501917c55850e8e2fd1a670c085b3d618e3f533e1624e.json
.tau_ledger/geom/_archive/symmetry_20250919170728_b6f5599a1cce9faf5689660c2d72b37f8883cdd5ccff2ac2c657dca39ee666e2.json
.tau_ledger/geom/_archive/symmetry_20250919171920_05ea032d994d814b8bb8cf80c93d65934a161bac5a12284f6aeecf7559b20bca.json
.tau_ledger/geom/_archive/symmetry_20250919172408_4b52042df9dd3ca861247ac5a6170cc6779288e42eba06ad055eb11c4085c7a3.json
.tau_ledger/geom/_archive/symmetry_20250919172634_171baa934d9e463fa8f15a752f1c3d8940a374f921b219c9b51895fbb3c87989.json
.tau_ledger/geom/_archive/symmetry_20250919172806_04a6797fbd465b29c6870d90860f162babb45e31da244c4880fc2c79e4295306.json
.tau_ledger/geom/_archive/symmetry_20250919201744_cfebbeb306c64b41b86bb362910470f1bbe90707579c5ae835fcb536b756ba86.json
.tau_ledger/geom/_archive/verify_20250919170526_1c69821e6d0e5769b2bcf9e6175b48a8c66683a0c765f17edf402a1b63098452.json
.tau_ledger/geom/_archive/verify_20250919170731_6358ccf863dc4040d3fd345759dd364af6ebd2d8068cf04602dcd0d26cb59f95.json
.tau_ledger/geom/_archive/verify_20250919171923_9570377ef23b95d2b9db1839bb6324aafe6d5f9e01101d88d480c30d212ceab7.json
.tau_ledger/geom/_archive/verify_20250919172411_16b06d8e576576f4e7d851f8295f1b4dac3c11be10d0d55f76e2e761ef863193.json
.tau_ledger/geom/_archive/verify_20250919172811_eb8e554134967468781cdceb80b1f0672cea26aa851a4429072b05147d13387a.json
.tau_ledger/geom/_archive/verify_20250919201747_af319a4cd3f2bd173f78cf2433b57f86078a1f456d67bcb54c079f0e55b7baa7.json
.tau_ledger/heegner/zone_reference.json
.tau_ledger/holo/holov1-%Y%m%dT%H%M%SZ.json
.tau_ledger/holo/holov1-20250914T142135Z.json
.tau_ledger/holo/holov1-20250914T143706Z.json
.tau_ledger/holo/holov1-20250914T144201Z.json
.tau_ledger/holo/holov1-20250914T144418Z.json
.tau_ledger/holo/holov1-20250914T144753Z.json
.tau_ledger/holo/holov1-20250914T150653Z.json
.tau_ledger/holo/holov1-20250914T151243Z.json
.tau_ledger/holo/holov1-20250914T192807Z.json
.tau_ledger/holo/holov1-20250914T193414Z.json
.tau_ledger/holo/holov1-20250914T193555Z.json
.tau_ledger/hysteresis/barcode_ref.json
.tau_ledger/hysteresis/box-CM-D23/box.json
.tau_ledger/hysteresis/box-CM-D23/cm-sector_receipt.json
.tau_ledger/hysteresis/box-CM-D23/framing_1.json
.tau_ledger/hysteresis/box-CM-D23/hysteresis.json
.tau_ledger/hysteresis/box-CM-D23/p23/hysteresis_p.json
.tau_ledger/hysteresis/box-CM-D23/p3/hysteresis_p.json
.tau_ledger/hysteresis/box-CM-D23/p5/hysteresis_p.json
.tau_ledger/hysteresis/box-CM-D23/summary.json
.tau_ledger/hysteresis/box-CM-D23/theta_to_box-CM-D23.json
.tau_ledger/hysteresis/box-FUSE-D23/box.json
.tau_ledger/hysteresis/box-FUSE-D23/cm-sector_receipt.json
.tau_ledger/hysteresis/box-FUSE-D23/framing_1.json
.tau_ledger/hysteresis/box-FUSE-D23/hysteresis.json
.tau_ledger/hysteresis/box-FUSE-D23/p23/hysteresis_p.json
.tau_ledger/hysteresis/box-FUSE-D23/p3/hysteresis_p.json
.tau_ledger/hysteresis/box-FUSE-D23/p5/hysteresis_p.json
.tau_ledger/hysteresis/box-FUSE-D23/theta_to_box-FUSE-D23.json
.tau_ledger/hysteresis/latest_barcode.json
.tau_ledger/iwasawa/mu_sampling.json
.tau_ledger/jupyter/cellv1-20250913T062756Z.json
.tau_ledger/jupyter/cellv1-20250913T062837Z.json
.tau_ledger/jupyter/cellv1-20250913T063004Z.json
.tau_ledger/kits/build_20250923T223116Z.json
.tau_ledger/langlands/ap.json
.tau_ledger/langlands/ap_stable.json
.tau_ledger/langlands/combined_ap_satake.json
.tau_ledger/langlands/combined_ap_satake_stable.json
.tau_ledger/langlands/L_tau.json
.tau_ledger/langlands/motives.json
.tau_ledger/langlands/rank.json
.tau_ledger/langlands/satake.json
.tau_ledger/langlands/satake_stable.json
.tau_ledger/last_run_A.json
.tau_ledger/last_run_B.json
.tau_ledger/lean_module_capsules/capsule_set.seal.json
.tau_ledger/lean_module_capsules/index.json
.tau_ledger/lean_module_capsules/src_Spectral_Core.json
.tau_ledger/lean_module_capsules/src_Spectral_face_plumbing.json
.tau_ledger/lean_module_capsules/src_Spectral_plumbing.json
.tau_ledger/lean_module_capsules/src_TauCrystal_TauSheaf.json
.tau_ledger/lean_proof_v2.json
.tau_ledger/metrics/monodromy.json
.tau_ledger/morpho/lean_geom/shot_A.receipt.json
.tau_ledger/morpho/profile/left__right_20250919201716.receipt.json
.tau_ledger/morpho/profile/left__right_20250919201727.receipt.json
.tau_ledger/morpho/profile/left__right_20250919202225.receipt.json
.tau_ledger/morpho/zk/shot_A__shot_B_20250919145014.receipt.json
.tau_ledger/morpho/zk/shot_A__shot_B_20250919145145.receipt.json
.tau_ledger/morpho/zk/shot_A__shot_B_20250919145155.receipt.json
.tau_ledger/motives/motive_15537.json
.tau_ledger/motives/motive_28404.json
.tau_ledger/motives/motive_8578.json
.tau_ledger/motives/motive_9220.json
.tau_ledger/phys/lattice.json
.tau_ledger/receipts/demo-20250914T023421Z.json
.tau_ledger/receipts/demo_manifest.json
.tau_ledger/receipts/last.json
.tau_ledger/receipts/receipt_2025-09-15T21-41-37Z_c6390eb.json
.tau_ledger/receipts/receipt_2025-09-15T21-44-52Z_5d78116.json
.tau_ledger/receipts/receipt_2025-09-15T21-47-33Z_f726ea2.json
.tau_ledger/receipts/receipt_2025-09-15T21-51-17Z_f726ea2.json
.tau_ledger/receipts/receipt_c6390eb9c5a1.json
.tau_ledger/reflection/report.json
.tau_ledger/rg/affine_leaf.json
.tau_ledger/runtime/current_entropy.json
.tau_ledger/signature/sigv1-20250914T035320Z.json
.tau_ledger/sigring/ringv1-20250914T023849Z.json
.tau_ledger/stability/thresholds.json
.tau_ledger/stability/thresholds.seal.json
.tau_ledger/timefold/restore/state_20250929T034553Z_ce6b47f71598/.tau_ledger/cohomology/h1_obstruction.json
.tau_ledger/timefold/restore/state_20250929T034553Z_ce6b47f71598/.tau_ledger/corridor/corridor_20250929T034134Z_3fe96cbe26f8.json
.tau_ledger/timefold/restore/state_20250929T034553Z_ce6b47f71598/.tau_ledger/lean_module_capsules/capsule_set.seal.json
.tau_ledger/timefold/restore/state_20250929T034553Z_ce6b47f71598/.tau_ledger/reflection/report.json
.tau_ledger/timefold/restore/state_20250929T035338Z_ce6b47f71598/.tau_ledger/cohomology/h1_obstruction.json
.tau_ledger/timefold/restore/state_20250929T035338Z_ce6b47f71598/.tau_ledger/corridor/corridor_20250929T034134Z_3fe96cbe26f8.json
.tau_ledger/timefold/restore/state_20250929T035338Z_ce6b47f71598/.tau_ledger/lean_module_capsules/capsule_set.seal.json
.tau_ledger/timefold/restore/state_20250929T035338Z_ce6b47f71598/.tau_ledger/reflection/report.json
.tau_ledger/timefold/restore/state_20250929T042104Z_ce6b47f71598/.tau_ledger/cohomology/h1_obstruction.json
.tau_ledger/timefold/restore/state_20250929T042104Z_ce6b47f71598/.tau_ledger/corridor/corridor_20250929T034134Z_3fe96cbe26f8.json
.tau_ledger/timefold/restore/state_20250929T042104Z_ce6b47f71598/.tau_ledger/entropy/witness_20250929T042100Z_74353175e75a.json
.tau_ledger/timefold/restore/state_20250929T042104Z_ce6b47f71598/.tau_ledger/lean_module_capsules/capsule_set.seal.json
.tau_ledger/timefold/restore/state_20250929T042104Z_ce6b47f71598/.tau_ledger/reflection/report.json
.tau_ledger/timefold/restore/state_20250929T043343Z_ce6b47f71598/.tau_ledger/cohomology/h1_obstruction.json
.tau_ledger/timefold/restore/state_20250929T043343Z_ce6b47f71598/.tau_ledger/corridor/corridor_20250929T034134Z_3fe96cbe26f8.json
.tau_ledger/timefold/restore/state_20250929T043343Z_ce6b47f71598/.tau_ledger/entropy/witness_20250929T043341Z_74353175e75a.json
.tau_ledger/timefold/restore/state_20250929T043343Z_ce6b47f71598/.tau_ledger/lean_module_capsules/capsule_set.seal.json
.tau_ledger/timefold/restore/state_20250929T043343Z_ce6b47f71598/.tau_ledger/reflection/report.json
.tau_ledger/timefold/state/state_20250929T034553Z_ce6b47f71598.json
.tau_ledger/timefold/state/state_20250929T035338Z_ce6b47f71598.json
.tau_ledger/timefold/state/state_20250929T042104Z_ce6b47f71598.json
.tau_ledger/timefold/state/state_20250929T043343Z_ce6b47f71598.json
.tau_ledger/timefold/state/state_20250929T045934Z_ce6b47f71598.json
.tau_ledger/timefold/timefold_mark_20250929T034028Z_79b1c5785c82.json
.tau_ledger/timefold/timefold_mark_20250929T034135Z_ce6b47f71598.json
.tau_ledger/timefold/timefold_mark_20250929T034554Z_ce6b47f71598.json
.tau_ledger/timefold/timefold_mark_20250929T035339Z_ce6b47f71598.json
.tau_ledger/timefold/timefold_mark_20250929T042105Z_ce6b47f71598.json
.tau_ledger/timefold/timefold_mark_20250929T043344Z_ce6b47f71598.json
.tau_ledger/timefold/timefold_mark_20250929T045935Z_ce6b47f71598.json
.tau_ledger/witness/jurisdictional/auto-20250922T220241Z.json
EOF_FIND_LIST
pass=$([ "$missing" -eq 0 ] && printf "%s" true || printf "%s" false)
: > "$rep"
printf "%s" "{" >> "$rep"
printf "%s" "\"ts\":\"$ts\",\"required_present\":$pass,\"required\":[\"$need1\",\"$need2\",\"$need3\"],\"json_count\":$count_json,\"total_bytes\":$total_bytes,\"census\":[" >> "$rep"
first=1; while IFS= read -r line; do [ -n "$line" ] || continue; f=$(printf "%s" "$line" | cut -d, -f1); b=$(printf "%s" "$line" | cut -d, -f2); h=$(printf "%s" "$line" | cut -d, -f3); if [ "$first" -eq 1 ]; then first=0; else printf "%s" "," >> "$rep"; fi; printf "%s" "{\"file\":\"$f\",\"bytes\":$b,\"sha256\":\"$h\"}" >> "$rep"; done < "$list_file"
printf "%s" "]}" >> "$rep"; rm -f "$list_file"; echo "[ok] manifest check → $rep"
